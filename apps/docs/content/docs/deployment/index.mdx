---
title: 部署概述
description: FWD.RS 生产环境部署架构与端口规划。
icon: Server
---

import { Cards, Card } from 'fumadocs-ui/components/card'

## 架构概览

FWD.RS 采用 **Sidecar 模式**，由两个容器协同工作：

```mermaid
graph TB
    subgraph "公网"
        User[用户浏览器]
        SSH[SSH 客户端]
    end

    subgraph "FWD.RS 集群"
        subgraph "Data Plane (Rust)"
            SSH_Server[":2222 SSH Server"]
            HTTP_Proxy[":8080 HTTP Proxy"]
            Mgmt_API[":9090 内部 API"]
        end

        subgraph "Control Plane (Node.js)"
            Web[":3000 Web Dashboard"]
        end

        DB[(PostgreSQL)]
    end

    SSH --> SSH_Server
    User --> HTTP_Proxy
    User --> Web
    Web --> Mgmt_API
    SSH_Server --> DB
    Web --> DB
```

## 端口规划

| 端口 | 服务 | 暴露方式 | 说明 |
|------|------|----------|------|
| `:2222` | SSH Server | 公网 | 接受 `ssh -R` 连接 |
| `:8080` | HTTP Proxy | 公网（通过反向代理） | 处理 `*.fwd.example.com` 请求 |
| `:3000` | Web Dashboard | 公网（通过反向代理） | 管理界面和认证 |
| `:9090` | Management API | **仅内部** | 不可暴露到公网 |
| `:5432` | PostgreSQL | **仅内部** | 数据库 |

> [!CAUTION]
> `:9090` Management API **禁止**暴露到公网！它允许终止任意连接，无需认证。
